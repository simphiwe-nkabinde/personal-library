<div class="container">
    <div (click)='locationBack()' class="my-4 text-decoration-none cursor-pointer text-primary">
        <i class="bi bi-chevron-left"> Back</i>
    </div>
    <div class="row">
        <div class="col-12 col-md-3">
            <img src="{{bookItem.volumeInfo.imageLinks.thumbnail}}" class="shadow-sm w-100" alt="">
        </div>
        <div class="col d-flex flex-column justify-content-evenl">
            <div>
                <strong>Title:</strong>
                <p>
                    {{bookItem.volumeInfo.title}} <br>
                    <small>{{bookItem.volumeInfo.subtitle}}</small>
                </p>
            </div>
            <div>
                <strong>Author:</strong>
                <span class="mx-1" *ngFor="let author of bookItem.volumeInfo.authors">{{author}} | </span>
            </div>
            <strong>Description:</strong>
            <div class="overflow-auto" style="height: 30%;">
                <p>{{bookItem.volumeInfo.description}}</p>
            </div>

            <div>
                <strong>Published:</strong>
                <p>{{bookItem.volumeInfo.publishedDate}}</p>
            </div>
            <a class="" target="_blank" href="{{bookItem.volumeInfo.previewLink}}">Full Preview</a>
        </div>

    </div>
    <hr>
    <div class="row">
        <!-- <div class="dropdown col" *ngIf="!bookInfo">
            <button class="btn btn-secondary btn-success dropdown-toggle" type="button" id="dropdownShelf" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-plus-lg"> Add to Shelf</i>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownShelf">
              <li><span class="dropdown-item" href="#">Action</span></li>
              <li><span class="dropdown-item" href="#">Another action</span></li>
              <li><span class="dropdown-item" href="#">Something else here</span></li>
            </ul>
        </div> -->
        <div class="dropdown col" *ngIf="!bookInfo">
            <div class="row">
                <button class="btn btn-success rounded-0 col-5 col-md-3" type="button" (click)="addItem()">
                    <i class="bi bi-plus-lg"> Add to Shelf</i>
                </button>
                <select [formControl]="shelfInput" class="form-select rounded-0 col-6 col-sm-4" style="width: inherit;">
                    <option value="completed">Completed</option>
                    <option value="reading">Reading</option>
                    <option selected value="wishlist">Wishlist</option>
                </select>               
            </div>

        </div>
        <div class="dropdown  col" *ngIf="bookInfo">
            <button class="btn btn-primary dropdown-toggle" type="button">
                <i class="bi bi-toggles"> Change Shelf</i>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownShelf">
              <li><span  class="dropdown-item"  (click)="updateShelf('completed')">Completed</span></li>
              <li><span  class="dropdown-item"  (click)="updateShelf('reading')">Reading</span></li>
              <li><span  class="dropdown-item"  (click)="updateShelf('wishlist')">Wsihlist</span></li>
            </ul>
        </div>
        <div *ngIf="bookInfo" class="col-3 mx-1 btn btn-danger" (click)="deleteItem()">
            <i class="bi bi-trash-fill"> Delete from Shelf</i>
        </div>
    </div>
    <div class="mt-3" *ngIf="bookInfo">
        My Notes:
        <textarea [formControl]="notesInput" (ngOnChange)="updateNotes()" style="height:200px;" class="bg-light text-secondary border-0 rounded p-3 w-100">
            {{bookInfo.notes}}
        </textarea>
        <button *ngIf="bookInfo" class="btn btn-success">Save Notes</button>
    </div>
</div>